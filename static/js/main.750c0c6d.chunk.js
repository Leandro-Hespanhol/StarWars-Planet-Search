(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),u=(a(16),Object(n.createContext)()),o=["population","orbital_period","diameter","rotation_period","surface_water"];function i(){var e=Object(n.useContext)(u),t=e.onInputChange,a=e.filterByName.name,l=e.onClassifcChange,c=e.createDeleteButton,i=e.onOrderFilterChange,m=e.columnCompValue,s=e.comparisson,d=e.sortFilter,f=e.buttonSortByOrder,b=e.columnClassf,p=e.onButtonFilter,E=e.classification;return r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},r.a.createElement("input",{type:"text",id:"name",placeholder:"Filtre por nome","data-testid":"name-filter",onChange:t,value:a}))),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p()}},r.a.createElement("label",{htmlFor:"classificationSelect"},r.a.createElement("select",{name:"column",id:"classificationSelect","data-testid":"column-filter",onChange:l},E.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"rangeSelector"},r.a.createElement("select",{name:"comparison",id:"rangeSelector","data-testid":"comparison-filter",onChange:l},s.map((function(e){return r.a.createElement("option",{key:e,onChange:l},e)})))),r.a.createElement("label",{htmlFor:"number_filter"},r.a.createElement("input",{type:"number",name:"value",id:"number_filter",placeholder:"valor",value:m.value,"data-testid":"value-filter",onChange:l})),r.a.createElement("button",{type:"submit","data-testid":"button-filter"},"Filtrar")),r.a.createElement("div",null,c()),r.a.createElement("div",null,r.a.createElement("select",{name:"column","data-testid":"column-sort",onChange:i,value:b},o.map((function(e){return r.a.createElement("option",{key:e},e)}))),r.a.createElement("label",{htmlFor:"ASC"},"Ascendente",r.a.createElement("input",{type:"radio",name:"orderBy",id:"ASC","data-testid":"column-sort-input-asc",onChange:d})),r.a.createElement("label",{htmlFor:"DESC"},"Descendente",r.a.createElement("input",{type:"radio",name:"orderBy",id:"DESC","data-testid":"column-sort-input-desc",onChange:d})),r.a.createElement("button",{type:"button","data-testid":"column-sort-button",onClick:function(){return f()}},"Ordenar")))}function m(){var e=Object(n.useContext)(u).allPlanets;return r.a.createElement("div",null,r.a.createElement(i,null),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rotation Period"),r.a.createElement("th",null,"Orbital Period"),r.a.createElement("th",null,"Diameter"),r.a.createElement("th",null,"Climate"),r.a.createElement("th",null,"Gravity"),r.a.createElement("th",null,"Terrain"),r.a.createElement("th",null,"Surface Water"),r.a.createElement("th",null,"Population"),r.a.createElement("th",null,"Films"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Edited"),r.a.createElement("th",null,"Url"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",{"data-testid":"planet-name"},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))})))))}var s=a(6),d=a(5),f=a(1),b=a(2),p=a(7),E=a.n(p),O=a(10);var j=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),c=Object(b.a)(l,2),u=c[0],o=c[1],i="https://swapi-trybe.herokuapp.com/api/planets/?page=1";return Object(n.useEffect)((function(){function e(){return(e=Object(O.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i).then((function(e){return e.json()}));case 2:t=e.sent,a=t.results,r(a.sort((function(e,t){return e.name>t.name?1:Number("-1")}))),o(a.sort((function(e,t){return e.name>t.name?1:Number("-1")})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),[a,u,o]};function h(e){var t=e.children,a=j(),l=Object(b.a)(a,3),c=l[0],o=l[1],i=l[2],m=Object(n.useState)([o]),p=Object(b.a)(m,2),E=p[0],O=p[1],h=Object(n.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),v=Object(b.a)(h,2),C=v[0],y=v[1],S=Object(n.useState)(["maior que","menor que","igual a"]),g=Object(b.a)(S,2),B=g[0],N=g[1],F=Object(n.useState)({column:"population",comparison:"maior que",value:0}),k=Object(b.a)(F,2),V=k[0],w=k[1],x=Object(n.useState)({filterByNumericValues:[]}),_=Object(b.a)(x,2),D=_[0],A=_[1];Object(n.useEffect)((function(){w(Object(f.a)(Object(f.a)({},V),{},{column:C[0]}))}),[C]),Object(n.useEffect)((function(){i(c.filter((function(e){return e.name.includes(E)})))}),[E]);function P(){return D.filterByNumericValues.forEach((function(e){var t=e.comparison,a=e.column,n=e.value,r=o.filter((function(e){switch(t){case"menor que":return Number(e[a])<Number(n);case"maior que":return Number(e[a])>Number(n);case"igual a":return Number(e[a])===Number(n);default:return[]}}));i(r)}))}Object(n.useEffect)((function(){P()}),[D]);var q=Object(n.useState)({order:{column:"population",sort:"ASC"}}),I=Object(b.a)(q,2),J=I[0],G=I[1],R=Object(n.useState)(""),T=Object(b.a)(R,2),U=T[0],W=T[1];var X=Object(n.useState)("ASC"),z=Object(b.a)(X,2),H=z[0],K=z[1];var L=Object(n.useState)([]),M=Object(b.a)(L,2),Q=M[0],Y=M[1];function Z(){return r.a.createElement("div",null,D.filterByNumericValues.map((function(e){return r.a.createElement("div",{key:e.column,id:e.column},r.a.createElement("label",{htmlFor:"deleteButton","data-testid":"filter"},r.a.createElement("span",null,e.column),r.a.createElement("span",null,e.comparison),r.a.createElement("span",null,e.value),r.a.createElement("button",{type:"button",name:"button",id:"deleteButton",onClick:function(e){return function(e){var t=e.target,a=D.filterByNumericValues.find((function(e){return e.column===t.parentNode.parentNode.id}));A(Object(f.a)(Object(f.a)({},D),{},{filterByNumericValues:Object(s.a)(D.filterByNumericValues.filter((function(e){return e!==a})))})),i(c)}(e)}},"X")))})))}Object(n.useEffect)((function(){i(Q)}),[Q]);var $={planets:c,onInputChange:function(e){var t=e.target;O(t.value)},onClassifcChange:function(e){var t=e.target,a=t.value,n=t.name;w(Object(f.a)(Object(f.a)({},V),{},Object(d.a)({},n,a)))},filteredByClassification:P,classification:C,setClassification:y,setColumnCompValue:w,columnCompValue:V,onButtonFilter:function(){A(Object(f.a)(Object(f.a)({},D),{},{filterByNumericValues:[].concat(Object(s.a)(D.filterByNumericValues),[V])})),y(Object(s.a)(C.filter((function(e){return e!==V.column})))),Z()},comparisson:B,setComparisson:N,filterValues:D,allPlanets:o,createDeleteButton:Z,onOrderFilterChange:function(e){var t=e.target;W(t.value),G(Object(f.a)(Object(f.a)({},J),{},{order:Object(f.a)(Object(f.a)({},J.order),{},{column:t.value})}))},columnClassf:U,sortFilter:function(e){var t=e.target;K(t.id),G(Object(f.a)(Object(f.a)({},J),{},{order:Object(f.a)(Object(f.a)({},J.order),{},{sort:t.id})}));var a=o.sort((function(e,t){return"ASC"===J.order.sort&&e[J.order.column]>t[J.order.column]?1:-1}));i(a)},ascDesc:H,buttonSortByOrder:function(){var e="";"ASC"===J.order.sort&&(e=o.sort((function(e,t){return e[J.order.column]-t[J.order.column]}))),"DESC"===J.order.sort&&(e=o.sort((function(e,t){return t[J.order.column]-e[J.order.column]}))),console.log(e.map((function(e){return e.population}))),Y(e)},filterByName:{name:E}};return r.a.createElement("div",null,r.a.createElement(u.Provider,{value:$},t))}var v=function(){return r.a.createElement(h,null,r.a.createElement(m,null))};c.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.750c0c6d.chunk.js.map